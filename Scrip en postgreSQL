-- Crear tabla EMPLEADOS
CREATE TABLE EMPLEADOS (
    IDENTIFICACION NUMERIC PRIMARY KEY,
    TIPO VARCHAR(5) CHECK (TIPO IN ('CC', 'TI', 'CE', 'NIT')),
    NOMBRE_1 VARCHAR(50) NOT NULL,
    NOMBRE_2 VARCHAR(50),
    APELLIDO_1 VARCHAR(50) NOT NULL,
    APELLIDO_2 VARCHAR(50),
    SEXO CHAR(1) CHECK (SEXO IN ('M', 'F')),
    FECHA_N DATE,
    LUGAR_N VARCHAR(100),
    DIRECCION VARCHAR(50),
    TELEFONO VARCHAR(50),
    EMAIL VARCHAR(100),
    SALARIO NUMERIC,
    ACTIVO CHAR(1) DEFAULT 'S' CHECK (ACTIVO IN ('S', 'N'))
);

-- Crear tabla CARGOS
CREATE TABLE CARGOS (
    COD_CARGO NUMERIC PRIMARY KEY,
    CARGO VARCHAR(100)
);

-- Crear tabla ELEMENTOS
CREATE TABLE ELEMENTOS (
    CODIGO NUMERIC PRIMARY KEY,
    ELEMENTO VARCHAR(50),
    DEVOLUTIVO VARCHAR(2) CHECK (DEVOLUTIVO IN ('Si', 'No')),
    TALLA VARCHAR(2),
    USO VARCHAR(12),
    MATERIALES VARCHAR(300),
    MANTENIMIENTO VARCHAR(300),
    USOS VARCHAR(300),
    NORMA VARCHAR(300),
    ATENUACION VARCHAR(50),
    SERIAL VARCHAR(250),
    TALLAS VARCHAR(250),
    UNIDAD NUMERIC,
    RUTA VARCHAR(800)
);

-- Crear tabla HISTORIAL_LABORAL
CREATE TABLE HISTORIAL_LABORAL (
    EMPLEADO NUMERIC NOT NULL,
    FECHA_INGRESO DATE,
    FECHA_SALIDA DATE,
    CARGO NUMERIC,
    ACTUAL CHAR(2) DEFAULT 'N' CHECK (ACTUAL IN ('S', 'N')),
    PRIMARY KEY (EMPLEADO, ACTUAL),
    CONSTRAINT FK_HISTORIAL_EMPLEADO FOREIGN KEY (EMPLEADO) REFERENCES EMPLEADOS(IDENTIFICACION) ON DELETE CASCADE,
    CONSTRAINT FK_HISTORIAL_CARGO FOREIGN KEY (CARGO) REFERENCES CARGOS(COD_CARGO)
);

-- Crear tabla ELEMENTOS_ASIGNADOS
CREATE TABLE ELEMENTOS_ASIGNADOS (
    EMPLEADO NUMERIC NOT NULL,
    ELEMENTO NUMERIC NOT NULL,
    ACTUAL CHAR(2) DEFAULT 'N' CHECK (ACTUAL IN ('S', 'N')),
    NUMERO VARCHAR(3),
    CANTIDAD NUMERIC,
    NIVEL VARCHAR(250),
    DURACION NUMERIC,
    PRIMARY KEY (EMPLEADO, ELEMENTO, ACTUAL),
    CONSTRAINT FK_ELEMENTOS_EMPLERADOS FOREIGN KEY (EMPLEADO) REFERENCES EMPLEADOS(IDENTIFICACION) ON DELETE CASCADE,
    CONSTRAINT FK_ELEMENTOS_ELEMENTOS FOREIGN KEY (ELEMENTO) REFERENCES ELEMENTOS(CODIGO)
);

-- Crear tabla ENTREGA_ELEMENTOS
CREATE TABLE ENTREGA_ELEMENTOS (
    ID_ENTREGA NUMERIC,
    ELEMENTO NUMERIC,
    VIGENTE VARCHAR(3),
    NUMERO VARCHAR(15),
    DEVOLUTIVO CHAR(2) CHECK (DEVOLUTIVO IN ('S', 'N')),
    FECHA_DEVOLUCION DATE,
    EMPLEADO NUMERIC,
    FECHA DATE,
    PRIMARY KEY (ID_ENTREGA, ELEMENTO, EMPLEADO),
    CONSTRAINT FK_ENTREGA_ELEMENTOS_ELEMENTO FOREIGN KEY (ELEMENTO) REFERENCES ELEMENTOS(CODIGO),
    CONSTRAINT FK_ENTREGA_ELEMENTOS_EMPLEADO FOREIGN KEY (EMPLEADO) REFERENCES EMPLEADOS(IDENTIFICACION)
);
